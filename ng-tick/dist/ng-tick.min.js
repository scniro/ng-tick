angular.module("ngTick",[]).directive("clock",function(t){return{scope:{format:"@",handle:"@clock",trigger:"="},link:function(e,n,r){e.handle&&(e.$root[e.handle]=e);var a=t("date"),o=(new Date).getTime(),i=new Tock({callback:function(){var t=i.lap(),r=new Date(o+t);e.format?n.text(a(new Date(r),e.format)):n.text(new Date(r))}});e.start=function(){i.go||i.start()},e.trigger||e.start()}}}).directive("ticker",function(t){return{scope:{format:"@",handle:"@ticker",trigger:"="},link:function(e,n,r){e.handle&&(e.$root[e.handle]=e);var a=t("date"),o=t("relativeTime"),i=new Tock({callback:function(){var t=o(i.lap());t=e.format?a(t,e.format):i.lap(),n.text(t)}});e.start=function(){i.reset(),i.start()},e.trigger||e.start()}}}).directive("countdown",function(t,e){return{scope:{format:"@",handle:"@countdown",duration:"=",trigger:"="},link:function(n,r,a){n.handle&&(n.$root[n.handle]=n);var o=t("date"),i=t("relativeTime"),c=new Tock({countdown:!0,interval:1,callback:function(){var t=i(c.lap());t=o(t,n.format),r.text(t)},complete:function(){n.handle&&n.$root[n.handle].$emit(n.handle+":end")}});n.start=function(){c.stop();var t=e.getDuration(n.duration);c.start(t)},n.trigger||n.start()}}}).factory("tickHelper",function(){function t(t){var e=new Date;return e.setMilliseconds(e.getMilliseconds()+(t.ms||0)),e.setSeconds(e.getSeconds()+(t.s||0)),e.setMinutes(e.getMinutes()+(t.m||0)),e.setHours(e.getHours()+(t.h||0)),Math.abs(e-new Date)}return{getDuration:t}}).filter("relativeTime",[function(){return function(t){return new Date(1970,0,1).setMilliseconds(t)}}]);