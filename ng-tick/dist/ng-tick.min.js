function init(){angular.module("ngTick",[]).directive("clock",["$filter","engine",function(t,i){return{scope:{format:"@",handle:"@clock",trigger:"="},link:function(n,e,s){n.handle&&(n.$root[n.handle]=n);var d=t("date"),o=(new Date).getTime(),r=i.timer({onTick:function(t){var i=new Date(o+t);n.format?e.text(d(new Date(i),n.format)):e.text(new Date(i))}});n.start=function(){r.go||r.start()},n.trigger||n.start()}}}]).directive("ticker",["$filter","engine",function(t,i){return{scope:{format:"@",handle:"@ticker",trigger:"="},link:function(n,e,s){var d=t("relativeTime"),o=t("date"),r=i.timer({onTick:function(t){var i=d(t);i=n.format?o(i,n.format):i,e.text(i)},onLap:function(t,i){n.handle&&n.$root[n.handle].$emit(n.handle+":lap",{lap:t,elapsed:i})}});n.handle&&(n.$root[n.handle]=n),n.start=function(){n.handle&&!r.ticking&&n.$root[n.handle].$emit(n.handle+":start"),r.start()},n.stop=function(){n.handle&&r.ticking&&n.$root[n.handle].$emit(n.handle+":stop"),r.stop()},n.reset=function(){n.handle&&n.$root[n.handle].$emit(n.handle+":reset"),r.reset()},n.lap=function(){r.lap()},n.$on("$destroy",function(){n.handle&&r.ticking&&n.$root[n.handle].$emit(n.handle+":stop"),r.stop()}),n.trigger||n.start()}}}]).directive("countdown",["$filter","tickHelper","$timeout","engine",function(t,i,n,e){return{scope:{format:"@",handle:"@countdown",duration:"=",trigger:"=",interval:"="},link:function(i,n,s){var d=t("relativeTime"),o=t("date");i.handle&&(i.$root[i.handle]=i);var r=e.countdown({onTick:function(t){var e=d(t);e=o(e,i.format),n.text(e)}});i.reset=function(){return i.handle&&i.$root[i.handle].$emit(i.handle+":reset"),r.reset(i.duration),this},i.start=function(){return i.handle&&!r.ticking&&i.$root[i.handle].$emit(i.handle+":start"),r.start(i.duration),this},i.stop=function(){return i.handle&&r.ticking&&i.$root[i.handle].$emit(i.handle+":stop"),r.stop(),this},i.trigger||i.start()}}}]).directive("binaryClock",["$timeout",function(t){return{restrict:"E",template:'<div id="clock"><div class="field" id="hours"><table border="0" cellspacing="0" cellpadding="0"> <tr><td><div class="blank"></div></td><td><div class="bit" id="hours-eights"></div></td></tr><tr><td><div class="blank" id="hours-forties"></div></td><td><div class="bit" id="hours-fours"></div></td></tr><tr><td><div class="bit" id="hours-twenties"></div></td><td><div class="bit" id="hours-twos"></div></td></tr><tr><td><div class="bit" id="hours-tens"></div></td><td><div class="bit" id="hours-ones"></div></td></tr></table></div><div class="field" id="minutes"><table border="0" cellspacing="0" cellpadding="0"><tr><td><div class="blank"></div></td><td><div class="bit" id="minutes-eights"></div></td></tr><tr><td><div class="bit" id="minutes-forties"></div></td><td><div class="bit" id="minutes-fours"></div></td></tr><tr><td><div class="bit" id="minutes-twenties"></div></td><td><div class="bit" id="minutes-twos"></div></td></tr><tr><td><div class="bit" id="minutes-tens"></div></td><td><div class="bit" id="minutes-ones"></div></td></tr></table></div><div class="field" id="seconds"><table border="0" cellspacing="0" cellpadding="0"><tr><td><div class="blank"></div></td><td><div id="seconds-eights" class="bit"></div></td></tr><tr><td><div id="seconds-forties" class="bit"></div></td><td><div id="seconds-fours" class="bit"></div></td></tr><tr><td><div id="seconds-twenties" class="bit"></div></td><td><div id="seconds-twos" class="bit"></div></td></tr><tr><td><div id="seconds-tens" class="bit"></div></td><td><div id="seconds-ones" class="bit"></div></td></tr></table></div></div>',link:function(i,n,e){t(function(){function t(t,i){var n=document.getElementById(t);return n.classList.contains("blank")?!1:void(i?n.setAttribute("class","bit on"):n.setAttribute("class","bit off"))}function i(i,n){t(i+"-forties",n>=40),n>=40&&(n-=40),t(i+"-twenties",n>=20),n>=20&&(n-=20),t(i+"-tens",n>=10),n>=10&&(n-=10),t(i+"-eights",n>=8),n>=8&&(n-=8),t(i+"-fours",n>=4),n>=4&&(n-=4),t(i+"-twos",n>=2),n>=2&&(n-=2),t(i+"-ones",n>=1)}function n(){var t=new Date;i("hours",t.getHours()),i("minutes",t.getMinutes()),i("seconds",t.getSeconds())}n();var e=new Tock({countdown:!0,interval:100,callback:function(){n()}});e.start(Date.now())})}}}]).factory("tickHelper",[function(){function t(t){var i=new Date;return i.setMilliseconds(i.getMilliseconds()+(t.ms?t.ms:0)),i.setSeconds(i.getSeconds()+(t.s||0)),i.setMinutes(i.getMinutes()+(t.m||0)),i.setHours(i.getHours()+(t.h||0)),Math.abs(i-new Date)}return{getDuration:t}}]).filter("relativeTime",[function(){return function(t){return new Date(1970,0,1,0).setMilliseconds(t)}}]).factory("engine",function(t){function i(t){function i(){if(d.ticking){e+=o,u+=o,c&&(c=!1,d.onLap(a,u),u=0),d.onTick(e);var t=Date.now()-n-e;setTimeout(i,o-t)}}t=t||{};var n,e,s,d=this,o=t.interval||10,r=0,c=!1,a=0,u=0;d.ticking=!1,this.onTick=t.onTick||function(){},this.onLap=t.onLap||function(){},this.reset=function(){return clearTimeout(s),d.ticking=!1,r=0,u=0,a=0,d.onTick(0),this},this.start=function(){return d.ticking||(e=r>0?r:0,n=Date.now()-e,d.ticking=!0,s=setTimeout(i,o)),this},this.stop=function(){return d.ticking&&(r=e,d.ticking=!1,u=0),this},this.lap=function(){return d.ticking&&(c=!0,a+=1),this}}function n(t){function i(){if(d.ticking){e+=o,d.onTick(from);var t=Date.now()-n-e;setTimeout(i,o-t)}}t=t||{};var n,e,s,d=this,o=t.interval||10;this.start=function(){return d.ticking||(n=Date.now(),d.ticking=!0,s=setTimeout(i,o)),this}}function e(i){function n(){if(o.ticking){d+=r,c-=r,o.onTick(c);var t=Date.now()-s-d;setTimeout(n,r-t)}}var e,s,d,o=this,r=i.interval||10,c=0;o.ticking=!1,i=i||{},this.onTick=i.onTick||function(){},this.reset=function(i){return c=t.getDuration(i)||0,o.ticking=!1,o.onTick(c),this},this.start=function(i){return c=c>0?c:t.getDuration(i)||0,o.ticking||(d=0,s=Date.now(),o.ticking=!0,e=setTimeout(n,r)),this},this.stop=function(){return o.ticking&&(o.ticking=!1),this},this.ticking=!1}return{timer:function(t){return new i(t)},countdown:function(t){return new e(t)},clock:function(t){return new n(t)}}})}!function(){"function"==typeof define&&define.amd?define(["angular"],function(){init()}):init()}();